<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>自定义索引站点配置教程</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #2980b9;
            margin-top: 30px;
        }
        .step {
            background-color: white;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 5px 5px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .step-number {
            display: inline-block;
            background-color: #3498db;
            color: white;
            width: 25px;
            height: 25px;
            text-align: center;
            border-radius: 50%;
            margin-right: 10px;
            font-weight: bold;
        }
        pre {
            background-color: #f0f0f0;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border: 1px solid #ddd;
        }
        code {
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
            background-color: #f0f0f0;
            padding: 2px 5px;
            border-radius: 3px;
        }
        .note {
            background-color: #fffde7;
            border-left: 4px solid #ffd600;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 5px 5px 0;
        }
    </style>
</head>
<body>
    <h1>自定义索引站点配置教程</h1>
    
    <div class="step">
        <h2><span class="step-number">1</span> 修改代码模板</h2>
        <p>将下列代码模板中的前三行id，name，domain对应位置修改为你要适配的站点;</p>
        <pre>{
    "id": "baozi",
    "name": "包子",
    "domain": "https://p.t-baozi.cc/",
    "encoding": "UTF-8",
    "public": false,
    "schema" : "NexusPhp",
    "search": {
        "paths": [
            {
                "path": "torrents.php",
                "method": "get"
            }
        ],
        "params": {
            "search": "{keyword}",
            "search_area": 4
        },
        "batch": {
            "delimiter": " ",
            "space_replace": "_"
        }
    },
    "category": {
        "movie": [
            {
                "id": 401,
                "cat": "Movies",
                "desc": "Movies电影"
            },
            {
                "id": 405,
                "cat": "Anime",
                "desc": "Animations动漫"
            },
            {
                "id": 404,
                "cat": "Documentary",
                "desc": "Documentaries纪录片"
            }
        ],
        "tv": [
            {
                "id": 402,
                "cat": "TV",
                "desc": "TV Series电视剧"
            },
            {
                "id": 420,
                "cat": "TV",
                "desc": "TV Shows综艺"
            },
            {
                "id": 404,
                "cat": "Documentary",
                "desc": "Documentaries纪录片"
            },
            {
                "id": 405,
                "cat": "Anime",
                "desc": "Animations动漫"
            }
        ]
    },
    "torrents": {
        "list": {
            "selector": "table.torrents > tr:has(\"table.torrentname\")"
        },
        "fields": {
            "id": {
                "selector": "a[href*=\"details.php?id=\"]",
                "attribute": "href",
                "filters": [
                    {
                        "name": "re_search",
                        "args": [
                            "\\d+",
                            0
                        ]
                    }
                ]
            },
            "title_default": {
                "selector": "a[href*=\"details.php?id=\"]"
            },
            "title_optional": {
                "optional": true,
                "selector": "a[title][href*=\"details.php?id=\"]",
                "attribute": "title"
            },
            "title": {
                "text": "{% if fields['title_optional'] %}{{ fields['title_optional'] }}{% else %}{{ fields['title_default'] }}{% endif %}"
            },
            "details": {
                "selector": "a[href*=\"details.php?id=\"]",
                "attribute": "href"
            },
            "download": {
                "selector": "a[href*=\"download.php?id=\"]",
                "attribute": "href"
            },
            "imdbid": {
                "selector": "div.imdb_100 > a",
                "attribute": "href",
                "filters": [
                    {
                        "name": "re_search",
                        "args": [
                            "tt\\d+",
                            0
                        ]
                    }
                ]
            },
            "date_elapsed": {
                "selector": "td:nth-child(4) > span",
                "optional": true
            },
            "date_added": {
                "selector": "td:nth-child(4) > span",
                "attribute": "title",
                "optional": true
            },
            "size": {
                "selector": "td:nth-child(5)"
            },
            "seeders": {
                "selector": "td:nth-child(6)"
            },
            "leechers": {
                "selector": "td:nth-child(7)"
            },
            "grabs": {
                "selector": "td:nth-child(8)"
            },
            "downloadvolumefactor": {
                "case": {
                    "img.pro_free": 0,
                    "img.pro_free2up": 0,
                    "img.pro_50pctdown": 0.5,
                    "img.pro_50pctdown2up": 0.5,
                    "img.pro_30pctdown": 0.3,
                    "*": 1
                }
            },
            "uploadvolumefactor": {
                "case": {
                    "img.pro_50pctdown2up": 2,
                    "img.pro_free2up": 2,
                    "img.pro_2up": 2,
                    "*": 1
                }
            },
            "description": {
                "selector": "td:nth-child(2) > table > tr > td.embedded > span[style]",
                "contents": -1
            },
            "labels": {
                "selector": "td:nth-child(2) > table > tr > td.embedded > span.tags"
            }
        }
    }
}</pre>
    </div>
    
    <div class="step">
        <h2><span class="step-number">2</span> Base64编码</h2>
        <p>打开 base64 编码器将上述代码编码为 base64 代码</p>
    </div>
    
    <div class="step">
        <h2><span class="step-number">3</span> 添加域名前缀</h2>
        <p>在代码前面加上"站点一级域名|"，例如<code>"t-baozi.cc|"</code>，得到最终代码;</p>
    </div>
    
    <div class="step">
        <h2><span class="step-number">4</span> 下载插件</h2>
        <p>MP插件市场搜索并下载"自定义索引站点";</p>
    </div>
    
    <div class="step">
        <h2><span class="step-number">5</span> 配置插件</h2>
        <p>按插件说明，将最终代码复制到插件配置对应位置，保存;</p>
    </div>
    
    <div class="step">
        <h2><span class="step-number">6</span> 同步信息</h2>
        <p>同步cookiecloud或手动添加站点信息。</p>
    </div>
</body>
</html>
